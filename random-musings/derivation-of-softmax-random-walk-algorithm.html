

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Derivation Of Softmax Random Walk Algorithm - James (Jake) Gearon</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="James (Jake) Gearon">
<meta property="og:title" content="Derivation Of Softmax Random Walk Algorithm">


  <link rel="canonical" href="https://jameshgrn.github.io/random-musings/derivation-of-softmax-random-walk-algorithm">
  <meta property="og:url" content="https://jameshgrn.github.io/random-musings/derivation-of-softmax-random-walk-algorithm">



  <meta property="og:description" name="description" content="Supplementary MethodObjective:To compute the probability of moving from a current position $ (x, y) $ to a neighboring position $ (i, j) $ by blending terrain slope and movement inertia, considering valid data and avoiding immediate return to the last position.">





  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "James (Jake) Gearon",
      "url" : "https://jameshgrn.github.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://jameshgrn.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="James (Jake) Gearon Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://jameshgrn.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NSW09PFFRV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NSW09PFFRV');
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="manifest" href="/images/manifest.json">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://jameshgrn.github.io/">James (Jake) Gearon</a></li>
          
            <li class="masthead__menu-item"><a href="/#research-focus">Research</a></li>
          
            <li class="masthead__menu-item"><a href="/publications/">Publications</a></li>
          
            <li class="masthead__menu-item"><a href="/talks/">Talks</a></li>
          
            <li class="masthead__menu-item"><a href="/random-musings/">Random Musings</a></li>
          
            <li class="masthead__menu-item"><a href="/pdf/Gearon_James_CV.pdf">CV</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    <img src="/images/Profile.jpeg" class="author__avatar" alt="James (Jake) Gearon">
  </div>

  <div class="author__content">
    <h3 class="author__name">James (Jake) Gearon</h3>
    <p class="author__bio">A sedimentology/geoinformatics PhD candidate @ Indiana University. Looking at sand from space. I also like LLMs. opinions are my own. email: jhgearon@iu.edu</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Indiana University</li>
      
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Department of Earth and Atmospheric Sciences</li>
      
      
        <li><a href="mailto:jhgearon@iu.edu"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
        <li><a href="https://scholar.google.com/citations?user=ppDq7_gAAAAJ"><i class="ai ai-google-scholar-square ai-fw"></i> Google Scholar</a></li>
      
      
        <li><a href="https://github.com/jameshgrn"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
      
      
        <li><a href="https://twitter.com/JakeGearon"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
        <li><a href="https://www.linkedin.com/in/jake-gearon-742767148"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Derivation Of Softmax Random Walk Algorithm">
    <meta itemprop="description" content="Supplementary MethodObjective:To compute the probability of moving from a current position $ (x, y) $ to a neighboring position $ (i, j) $ by blending terrain slope and movement inertia, considering valid data and avoiding immediate return to the last position.">
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Derivation Of Softmax Random Walk Algorithm
</h1>
          
        
        
            
        </header>
      

      <section class="page__content" itemprop="text">
        <h3 id="supplementary-method">Supplementary Method</h3>
<h4 id="objective">Objective:</h4>
<p>To compute the probability of moving from a current position $ (x, y) $ to a neighboring position $ (i, j) $ by blending terrain slope and movement inertia, considering valid data and avoiding immediate return to the last position.</p>

<h4 id="preliminaries-and-definitions">Preliminaries and Definitions:</h4>

<h5 id="notations">Notations:</h5>
<ul>
  <li>$ (x, y) $ : Current Position</li>
  <li>$ (i, j) $ : Neighboring Position</li>
</ul>

<h5 id="parameters">Parameters:</h5>
<ul>
  <li>$ \phi $ : Weighting factor for slope.</li>
  <li>$ \psi $ : Weighting factor for inertia.</li>
  <li>$ \omega $ : Blending factor between inertia and slope.</li>
</ul>

<h5 id="cosine-similarity">Cosine Similarity:</h5>
<p>Given two vectors $ A $ and $ B $ , the cosine similarity, $ \text{cosine_similarity}(A, B) $ , is: 
$ $ \text{cosine_similarity}(A, B) = \frac{A \cdot B}{|A|_2 |B|_2} $ $</p>

<h5 id="softmax-transformation">Softmax Transformation:</h5>
<p>For a vector $ z $ with components $ z_1, z_2, â€¦ z_k $ , the softmax function, denoted as $ \text{softmax}(z) $ , is defined as:</p>

<p>$ $ \text{softmax}(z)<em>j = \frac{e^{z_j}}{\sum</em>{l=1}^{k} e^{z_l}} $ $</p>

<h4 id="elements-calculation">Elements Calculation:</h4>

<h5 id="slope--s_ij--">Slope, $ S_{i,j} $ :</h5>
<p>Given:</p>
<ul>
  <li>$ e_c $ and $ e_n $ as elevations at current position and neighbor.</li>
  <li>$ dx $ and $ dy $ as absolute differences in x and y coordinates.
The slope $ S_{i,j} $ between positions is calculated as follows, considering the handling of invalid data and the distance for diagonal vs. orthogonal moves:</li>
</ul>

<p>$ $
S_{i,j} = 
\begin{cases} 
\text{np.NINF} &amp; \text{if } e_c \text{ or } e_n \text{ is invalid or } e_c = e_n = \text{no_data_value}<br />
\frac{e_c - e_n}{\sqrt{2}} &amp; \text{if } dx = dy \text{ (diagonal move)}<br />
\frac{e_c - e_n}{1} &amp; \text{if } dx \neq dy \text{ (orthogonal move)}
\end{cases}
$ $</p>

<h5 id="inertia--i_ij--">Inertia, $ I_{i,j} $ :</h5>
<p>Using the last movement vector $ V_{last} = [dx_{last}, dy_{last}] $ and the direction vector $ V_{direction} = [i-x, j-y] $ .</p>

<p>$ $ I_{i,j} = \left( \frac{1 + \text{cosine_similarity}(V_{last}, V_{direction})}{2} \right) $ $</p>

<h4 id="combining-slope-and-inertia">Combining Slope and Inertia:</h4>

<h5 id="raw-combined-weight">Raw Combined Weight:</h5>
<p>Blend slope and inertia using:
$ $ W_{i,j}^{raw} = (1 - \omega) \psi I_{i,j} + \omega \phi  S_{i,j} $ $</p>

<h4 id="probabilistic-decision-model">Probabilistic Decision Model:</h4>

<h5 id="softmax-transformation-1">Softmax Transformation:</h5>
<p>Compute the transition probabilities by applying the softmax function to the combined weights directly:
$ $ P((x, y) \to (i,j)) = \text{softmax}(W^{raw})<em>{i,j} \to \frac{e^{W^{raw}</em>{i,j}}}{\sum_{(k,l) \in \text{neighbors}} e^{W^{raw}_{k,l}}} $ $
Here, $ (k, l) $ ranges over all positions neighboring $ (x, y) $ that are potential candidates for movement, excluding the current position itself and any positions that would constitute an immediate return to the last position.</p>
<h5 id="computation">Computation:</h5>
<ol>
  <li>For $ (x, y) $ , calculate $ S_{i,j} $ and $ I_{i,j} $ for all valid neighbors, excluding the immediate last position to prevent back-and-forth movement.</li>
  <li>Compute the raw combined weight, $ W_{i,j}^{raw} $ , for each neighbor by blending inertia and slope.</li>
  <li>Apply the softmax function to the combined weights to get probabilities for each neighbor.</li>
  <li>Select a neighbor $ (i,j) $ based on these probabilities.</li>
  <li>Update $ (x,y) $ to $ (i,j) $ and continue, ensuring to handle masked or invalid elevation data appropriately.</li>
</ol>


        

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=https://jameshgrn.github.io/random-musings/derivation-of-softmax-random-walk-algorithm" class="btn btn--twitter" title="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://jameshgrn.github.io/random-musings/derivation-of-softmax-random-walk-algorithm" class="btn btn--facebook" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://jameshgrn.github.io/random-musings/derivation-of-softmax-random-walk-algorithm" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="https://jameshgrn.github.io/random-musings/a-dimensionless-analysis-of-the-shear-stress-ratio-on-an-alluvial-ridge" class="pagination--pager" title="A Dimensionless Analysis Of The Shear Stress Ratio On An Alluvial Ridge
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/jameshgrn"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://jameshgrn.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 James (Jake) Gearon. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>.</div>

      </footer>
    </div>

    <script src="https://jameshgrn.github.io/assets/js/main.min.js"></script>







  </body>
</html>

